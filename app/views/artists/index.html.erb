<% @title = "Artists" -%>
<div class="page-header">
  <h2>Artist List<small> コラボレーションするアーティストを探しましょう</small></h2>
  <%= search_key_words(params) %>
</div>
<div class="row">
  <% if @artists.present? %>
    <div class="span8">
      <% @artists.each do |artist| %>
        <div class="row">
          <div class="span1">
            <%= link_to artist_image_tag(artist, ""), path_to_artist(artist.username) %>
          </div>
          <div class="span7">
            <h4><%= link_to artist.username, path_to_artist(artist.username) %> <%= artist.name if artist.name.present? %></h4>
            <p>
            <% if artist.skill_list.present? -%>
              <b>できること: </b><%= artist.skill_list %><br />
            <% end -%>
            <% if artist.interest_list.present? -%>
              <b>してほしいこと: </b><%= artist.interest_list %><br />
            <% end -%>
            <% if artist.biography.present? -%>
              <blockquote>
                <p><%= truncate(Sanitize.clean(artist.biography, Sanitize::Config::RESTRICTED),:length => 80).html_safe %></p>
              </blockquote>
            <% end -%>
            </p>
          </div>
        </div>
        <div class="page-header", style="margin-top: 10px">
        </div>
      <% end %>
      <%= paginate @artists %>
    </div>
    <div class="span4">
      <h2>条件で絞り込む</h2>
      <% if @skills.present? %>
      <h3>できることで絞り込む</h3>
      <div>
        <% tag_cloud(@skills, %w(css1 css2 css3 css4)) do |tag, css_class| %>
          <%= link_to_add_retrieval_tag(tag.name, "skill", params, css_class) %>
        <% end %>
      </div>
      <hr>
    <% end %>
    <% if @interests.present? %>
      <h3>してほしいことで絞り込む</h3>
      <div>
        <% tag_cloud(@interests, %w(css1 css2 css3 css4)) do |tag, css_class| %>
          <%= link_to_add_retrieval_tag(tag.name, "interest", params, css_class) %>
        <% end %>
      </div>
      <hr>
    <% end %>
    <% if @areas.present? %>
      <h3>活動地域で絞り込む</h3>
      <div>
        <% tag_cloud(@areas, %w(css1 css2 css3 css4)) do |tag, css_class| %>
          <%= link_to_add_retrieval_tag(tag.name, "area", params, css_class) %>
        <% end %>
      </div>
      <hr>
    <% end %>
    <% if @free_words.present? %>
      <h3>フリーワードで絞り込む</h3>
      <div>
        <% tag_cloud(@free_words, %w(css1 css2 css3 css4)) do |tag, css_class| %>
          <%= link_to_add_retrieval_tag(tag.name, "free_word", params, css_class) %>
        <% end %>
      </div>
    <% end %>
    </div>
  <% else %>
    <div class="span12">条件に該当するアーティストがいません</div>
  <% end %>
</div>

